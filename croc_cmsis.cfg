# --- Adapter Configuration ---
adapter driver cmsis-dap
# Select JTAG transport (CMSIS-DAP defaults to SWD often)
transport select jtag
# Adjust speed based on your hardware (kHz)
adapter speed 1000

# --- Target Configuration ---
set _CHIPNAME riscv
# PULP chips typically have an IR length of 5. 
# Adjust -expected-id if you know your specific JTAG IDCODE.
jtag newtap $_CHIPNAME cpu -irlen 5 -expected-id 0x00000001 -ignore-version

set _TARGETNAME $_CHIPNAME.cpu
target create $_TARGETNAME riscv -chain-position $_TARGETNAME

# Configure the RISC-V debug module (0.13 is standard for newer PULP)
$_TARGETNAME configure -work-area-phys 0x80000000 -work-area-size 10000 -work-area-backup 0

# Optional: Set the reset configuration if your board supports it
# reset_config trst_and_srst
